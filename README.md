# Second_order_canonical_system

Исполняемым файлом является Main.m

Строится траектория двумерной системы канонического вида, описывающей колебания маятника (пояснения есть в файле
Маятник.docx).

Если траектория не попадает в ограничения на функцию и ее производную вида

constr1 < Psi(y) < constr2

dy_constr1 < dPsi(y) / dy < dy_constr2

(возможно, что не все 4 ограничения заданы, то кривая корректируется).

Сначала корректируется выход за ограничения по dPsi(y) c с помощью вызова методов lower_constraint_dPsi(...)
и upper_constraint_dPsi(...)

Затем корректируется выход за ограничения по Psi(y). Для этого нужно вызвать методы lower_constraint_Psi(...)
и upper_constraint_Psi(...)

После вызова любого из методов нужно добавить в массив control_arr строку row, которая полностью описывает 
корректирующий участок траектории. Это нужно для того, чтобы затем автоматически синтезировать новое управление.

Массив control_arr имеет следующую структуру.

Каждая его строка описывает кривую.

Порядок элементов в строке следующий:

1 : y_0 - начальная точка (y) кривой;
2 : y_end - конечная точка (у) кривой;
3 - 6 : коэффициенты c0, c1, c2, c3
7 : тип кривой
кривая может иметь тип 0, 1, 2
тип 0 - кривая вида Psi(y) = c0 + c1*(y - y_0_c) + c2*(y - y_0_c)^2 + c3*(y - y_0_c)^3;
тип 1 - кривая вида Psi(y) = c0 + c1*(y - y_0) + c2*(y - y_0)^2 + c3*(y - y_0)^3 + d*(y - y0)^2*(y - y_end)^2
тип 2 - кривая вида Psi(y) = c0 + c1*(y - y_0_c) + c2*(y - y_0_c)^2 + c3*(y -y_0_c)^3 + d*y_norm^2*(3 - 2*y_norm), 
где y_norm = (y - y_0) / (y_end - y_0);
8 : d (если есть)
9 : y_0_c (если есть)
10 : время движения по этому участку кривой (вычисляется автоматически в time_modeling.m)

В Main.m в массив control_arr просто добавляются строки по мере их появления.

В time_modeling.m массив автоматически сортируется и вычисляется вся необходимая
информация для построения управления.
